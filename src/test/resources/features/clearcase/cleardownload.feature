@cleardl
Feature: 清理下载列表

  Scenario Outline:
    Given open the "splSearch.OfflineTaskPage" page for uri "/download/#"
    When I set the parameter "DbListPageSearchInput" with value "<name>"
    And I wait for "2000" millsecond
    Given the data name is "<name>.csv" then i click the "下载" button

    Examples:
      | name | macroSearch                                                                | splQuery1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
      | _    | `external_chart_2(24,500)`                                                 | tag:sample04061424 \| chart count() as cnt over apache.resp_len span=\"500\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
      | _    | tag:sample04061424 \| eval x=`me_substr_1(\"VendorLongitude\")` \| table x | tag:sample04061424 \| eval x=substring(\"VendorLongitude\",2) \| table x                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
      | _    | tag:sample04061424 \| eval x=`m1_2(1,2)` \| table x                        | tag:sample04061424 \| eval x=if(isstr(apache.clientip),1-2,1+2) \| table x                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
      | _    | tag:sample04061424 \| eval x=`m2_2(1,2)` \| table x                        | tag:sample04061424 \| eval x=\"if(isstr(apache.clientip),1-2,1+2)\" \| table x                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
      | _    | tag:sample04061424 \| eval x=`mne_if_2(1,2)` \| table x                    | tag:sample04061424 \| eval x=\"if(isstr(apache.method),1-2,1+2)\" \| table x                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
      | _    | `map_eval_resplen_stats_count_2(count,69)`                                 | tag:sample04061424 \| eval resp_len=69 \| limit 1 \| table resp_len \| map \" tag:sample04061424 \| stats count() \"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
      | _    | `two_param(\"23.166.125.53\", \"1.1\")`                                    | tag:sample04061424 \| stats count() as ip_cnt by apache.clientip, apache.version \| where apache.clientip==\"23.166.125.53\" && apache.version==\"1.1\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
      | _    | `map_opt_count_2(count, count)`                                            | tag:\"sample04061424\" \| eval txt=\"count\"\| limit 1 \| table txt \| map \" tag:\"sample04061424\" \| stats count(timestamp) \"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
      | _    | `app_permission_sample_two_param(\"23.166.125.53\", \"1.1\")`              | tag:sample04061424 \| stats count() as ip_cnt by apache.clientip, apache.version \| where apache.clientip==\"23.166.125.53\" && apache.version==\"1.1\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
      | _    | `app_permission_sample_two_param(\"23.166.125.53\", \"1.1\")`              | tag:sample04061424 \| stats count() as ip_cnt by apache.clientip, apache.version \| where apache.clientip==\"23.166.125.53\" && apache.version==\"1.1\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
      | _    | `huanbi_2(\"sample04061424_display\",count)`                               | starttime=\"now/d\" endtime=\"now\" tag:sample04061424_display \| bucket timestamp span=1h as ts \|stats count() as count_ by ts\| eval hour=formatdate(tolong(ts),\"HH\")\|eval line=\"今天\"\|append [[starttime=\"-1d/d\" endtime=\"now/d\" tag:sample04061424_display \| bucket timestamp span=1h as ts\|stats count() as count_ by ts\| eval hour=formatdate(tolong(ts),\"HH\")\|eval line=\"昨天\"]] \| append [[starttime=\"-7d/d\" endtime=\"-6d/d\" tag:sample04061424_display \| bucket timestamp span=1h as ts\|stats count() as count_ by ts\| eval hour=formatdate(tolong(ts),\"HH\") \|eval line=\"一周前\"]] \| rename count_ as \"请求量\" |
      | _    | `timechart_hour_1(1)`                                                      | tag:sample04061424 \| timechart span=1h count() as res_count \| where res_count>0 \| eval f_time=formatdate(_time)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      | _    | `one_param(\"23.166.125.53\")`                                             | tag:sample04061424 \| stats count() by apache.clientip, apache.version \| where apache.clientip==\"23.166.125.53\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      | _    | `sub_join_left_1(apache.clientip)`                                         | tag:sample04061424 \| stats avg(apache.status) by apache.clientip \| join type=left apache.clientip [[ tag:sample04061424 AND apache.clientip:23.166.125.53 \| stats sum(apache.status) by apache.clientip ]]                                                                                                                                                                                                                                                                                                                                                                                                                                    |
      | _    | `dup_names_1(apache.clientip)`                                             | tag:\"sample04061424\" \| stats avg(apache.status) by apache.clientip \| join type=left apache.clientip [[ tag:\"sample04061424\" AND apache.clientip:23.166.125.53 \| stats sum(apache.status) by apache.clientip ]]                                                                                                                                                                                                                                                                                                                                                                                                                            |
      | _    | `external_chart_2(24,500)`                                                 | tag:sample04061424 \| chart count() as cnt over apache.resp_len span=\"500\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
      | _    | tag:sample04061424 \| eval x=`me_substr_1(\"VendorLongitude\")` \| table x | tag:sample04061424 \| eval x=substring(\"VendorLongitude\",2) \| table x                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
      | _    | tag:sample04061424 \| eval x=`m1_2(1,2)` \| table x                        | tag:sample04061424 \| eval x=if(isstr(apache.clientip),1-2,1+2) \| table x                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
      | _    | tag:sample04061424 \| eval x=`m2_2(1,2)` \| table x                        | tag:sample04061424 \| eval x=\"if(isstr(apache.clientip),1-2,1+2)\" \| table x                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
      | _    | tag:sample04061424 \| eval x=`mne_if_2(1,2)` \| table x                    | tag:sample04061424 \| eval x=\"if(isstr(apache.method),1-2,1+2)\" \| table x                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
      | _    | `map_eval_resplen_stats_count_2(count,69)`                                 | tag:sample04061424 \| eval resp_len=69 \| limit 1 \| table resp_len \| map \" tag:sample04061424 \| stats count() \"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
      | _    | `two_param(\"23.166.125.53\", \"1.1\")`                                    | tag:sample04061424 \| stats count() as ip_cnt by apache.clientip, apache.version \| where apache.clientip==\"23.166.125.53\" && apache.version==\"1.1\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
      | _    | `map_opt_count_2(count, count)`                                            | tag:\"sample04061424\" \| eval txt=\"count\"\| limit 1 \| table txt \| map \" tag:\"sample04061424\" \| stats count(timestamp) \"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
      | _    | `app_permission_sample_two_param(\"23.166.125.53\", \"1.1\")`              | tag:sample04061424 \| stats count() as ip_cnt by apache.clientip, apache.version \| where apache.clientip==\"23.166.125.53\" && apache.version==\"1.1\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
      | _    | `app_permission_sample_two_param(\"23.166.125.53\", \"1.1\")`              | tag:sample04061424 \| stats count() as ip_cnt by apache.clientip, apache.version \| where apache.clientip==\"23.166.125.53\" && apache.version==\"1.1\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
      | _    | `huanbi_2(\"sample04061424_display\",count)`                               | starttime=\"now/d\" endtime=\"now\" tag:sample04061424_display \| bucket timestamp span=1h as ts \|stats count() as count_ by ts\| eval hour=formatdate(tolong(ts),\"HH\")\|eval line=\"今天\"\|append [[starttime=\"-1d/d\" endtime=\"now/d\" tag:sample04061424_display \| bucket timestamp span=1h as ts\|stats count() as count_ by ts\| eval hour=formatdate(tolong(ts),\"HH\")\|eval line=\"昨天\"]] \| append [[starttime=\"-7d/d\" endtime=\"-6d/d\" tag:sample04061424_display \| bucket timestamp span=1h as ts\|stats count() as count_ by ts\| eval hour=formatdate(tolong(ts),\"HH\") \|eval line=\"一周前\"]] \| rename count_ as \"请求量\" |
      | _    | `timechart_hour_1(1)`                                                      | tag:sample04061424 \| timechart span=1h count() as res_count \| where res_count>0 \| eval f_time=formatdate(_time)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      | _    | `one_param(\"23.166.125.53\")`                                             | tag:sample04061424 \| stats count() by apache.clientip, apache.version \| where apache.clientip==\"23.166.125.53\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      | _    | `sub_join_left_1(apache.clientip)`                                         | tag:sample04061424 \| stats avg(apache.status) by apache.clientip \| join type=left apache.clientip [[ tag:sample04061424 AND apache.clientip:23.166.125.53 \| stats sum(apache.status) by apache.clientip ]]                                                                                                                                                                                                                                                                                                                                                                                                                                    |
      | _    | `dup_names_1(apache.clientip)`                                             | tag:\"sample04061424\" \| stats avg(apache.status) by apache.clientip \| join type=left apache.clientip [[ tag:\"sample04061424\" AND apache.clientip:23.166.125.53 \| stats sum(apache.status) by apache.clientip ]]                                                                                                                                                                                                                                                                                                                                                                                                                            |
      | _    | `external_chart_2(24,500)`                                                 | tag:sample04061424 \| chart count() as cnt over apache.resp_len span=\"500\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
      | _    | tag:sample04061424 \| eval x=`me_substr_1(\"VendorLongitude\")` \| table x | tag:sample04061424 \| eval x=substring(\"VendorLongitude\",2) \| table x                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
      | _    | tag:sample04061424 \| eval x=`m1_2(1,2)` \| table x                        | tag:sample04061424 \| eval x=if(isstr(apache.clientip),1-2,1+2) \| table x                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
      | _    | tag:sample04061424 \| eval x=`m2_2(1,2)` \| table x                        | tag:sample04061424 \| eval x=\"if(isstr(apache.clientip),1-2,1+2)\" \| table x                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
      | _    | tag:sample04061424 \| eval x=`mne_if_2(1,2)` \| table x                    | tag:sample04061424 \| eval x=\"if(isstr(apache.method),1-2,1+2)\" \| table x                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
      | _    | `map_eval_resplen_stats_count_2(count,69)`                                 | tag:sample04061424 \| eval resp_len=69 \| limit 1 \| table resp_len \| map \" tag:sample04061424 \| stats count() \"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
      | _    | `two_param(\"23.166.125.53\", \"1.1\")`                                    | tag:sample04061424 \| stats count() as ip_cnt by apache.clientip, apache.version \| where apache.clientip==\"23.166.125.53\" && apache.version==\"1.1\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
      | _    | `map_opt_count_2(count, count)`                                            | tag:\"sample04061424\" \| eval txt=\"count\"\| limit 1 \| table txt \| map \" tag:\"sample04061424\" \| stats count(timestamp) \"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
      | _    | `app_permission_sample_two_param(\"23.166.125.53\", \"1.1\")`              | tag:sample04061424 \| stats count() as ip_cnt by apache.clientip, apache.version \| where apache.clientip==\"23.166.125.53\" && apache.version==\"1.1\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
      | _    | `app_permission_sample_two_param(\"23.166.125.53\", \"1.1\")`              | tag:sample04061424 \| stats count() as ip_cnt by apache.clientip, apache.version \| where apache.clientip==\"23.166.125.53\" && apache.version==\"1.1\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
      | _    | `huanbi_2(\"sample04061424_display\",count)`                               | starttime=\"now/d\" endtime=\"now\" tag:sample04061424_display \| bucket timestamp span=1h as ts \|stats count() as count_ by ts\| eval hour=formatdate(tolong(ts),\"HH\")\|eval line=\"今天\"\|append [[starttime=\"-1d/d\" endtime=\"now/d\" tag:sample04061424_display \| bucket timestamp span=1h as ts\|stats count() as count_ by ts\| eval hour=formatdate(tolong(ts),\"HH\")\|eval line=\"昨天\"]] \| append [[starttime=\"-7d/d\" endtime=\"-6d/d\" tag:sample04061424_display \| bucket timestamp span=1h as ts\|stats count() as count_ by ts\| eval hour=formatdate(tolong(ts),\"HH\") \|eval line=\"一周前\"]] \| rename count_ as \"请求量\" |
      | _    | `timechart_hour_1(1)`                                                      | tag:sample04061424 \| timechart span=1h count() as res_count \| where res_count>0 \| eval f_time=formatdate(_time)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      | _    | `one_param(\"23.166.125.53\")`                                             | tag:sample04061424 \| stats count() by apache.clientip, apache.version \| where apache.clientip==\"23.166.125.53\"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
      | _    | `sub_join_left_1(apache.clientip)`                                         | tag:sample04061424 \| stats avg(apache.status) by apache.clientip \| join type=left apache.clientip [[ tag:sample04061424 AND apache.clientip:23.166.125.53 \| stats sum(apache.status) by apache.clientip ]]                                                                                                                                                                                                                                                                                                                                                                                                                                    |
      | _    | `dup_names_1(apache.clientip)`                                             | tag:\"sample04061424\" \| stats avg(apache.status) by apache.clientip \| join type=left apache.clientip [[ tag:\"sample04061424\" AND apache.clientip:23.166.125.53 \| stats sum(apache.status) by apache.clientip ]]                                                                                                                                                                                                                                                                                                                                                                                                                            |
