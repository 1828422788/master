Feature: 输入SPL语句，检查搜索完成后的事件数

  Background:
    Given I click the "LocateSearchPage" button
    And I will see the "splSearch.SearchPage" page

  @smoke @spl
  Scenario Outline: 根据生成的事件个数进行判断
    Given I set the parameter "SearchInput" with value "<splQuery>"
    And I click the "DateEditor" button
    And I click the "Today" button
    And I click the "SearchButton" button
    And I wait element "SearchStatus" change text to "搜索完成!"
    Then I will see the "SearchResult" of "<splQuery>" will between "<range>"
    And I will see "<rowNum>" rows and "<columnNum>" columns of "<splQuery>" in the table

    Examples:
      | splQuery                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | range       | rowNum | columnNum |
      | index=yott* ERROR AND tag:sample04061424*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 200,300     |        |           |
      | index=* ERROR AND tag:sample04061424*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 200,300     |        |           |
      | index=schedule schedule_name:resp_len_in_minute                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |             |        |           |
      | (index=yotta starttime="-5h" endtime = "now" tag:sample04061424) OR ( index=machine* starttime="-1000d/d" endtime="now"  appname:java)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 12180,29799 |        |           |
      | index=*,schedule starttime="-5h" endtime = "now" ERROR AND tag:sample04061424*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 200,300     |        |           |
      | (index=yotta starttime="-5h" endtime = "now" tag:sample04061424) OR ( index=machine* starttime="-1000d/d" endtime="now"  appname:java) \| bucket timestamp span=1d as ts \| stats count() as cnt by ts \| esma cnt timefield=ts                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 12183,15000 |        |           |
      | (index=yotta starttime="now/d" endtime="now" tag:sample04061424  AND [[ tag:sample04061424 \| limit 1 \| fields apache.method ]]) AND ( index=yotta [[ tag:sample04061424 \| limit 1 \| fields  apache.status]])                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 49          |        |           |
      | index=yott* starttime="-5h/h" endtime="now" tag:"sample04061424" \| eval time = formatdate(timestamp, "HH") \| stats avg(apache.status) by time \| join type=left time [[ index=machine* starttime="-1000d" endtime="now" appname:houses  \| eval time = tolong(floor(json.median_house_value)) \| stats avg(json.property_tax_rate) by time]]                                                                                                                                                                                                                                                                                                                                                                  | 72          |        | 2         |
      | index=apache,yotta* starttime="-5h/h" endtime="now" tag:"sample04061424" AND apache.referer_domain:*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 40,80       |        |           |
      | index=yotta starttime="-5h" endtime = "now" tag:sample04061424*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 2129,4926   |        |           |
      | index=machine* starttime="-1000d" endtime="now" appname:houses                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 无           |        |           |
      | index=yotta tag:sample04061424                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 72          |        |           |
      | index=yotta *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |             |        |           |
      | index=internal *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |             |        |           |
      | index=schedule *                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |             |        |           |
      | starttime="now-1M/M-1d/w"  endtime="now" tag:sample04061424                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |             |        |           |
      | starttime=2018-07-31 endtime=2018-07-31:23:59:00 tag:sample04061424                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |             |        |           |
      | starttime="-2d/d" endtime="now/d" logtype:apache \| stats count(apache.resp_len) as event_count, max(apache.resp_len) as max_len, avg(apache.resp_len) as avg_status                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |             |        | 3         |
      | starttime="-5h/h" endtime="now" tag:sample04061424                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 72          |        |           |
      | index=yotta tag:sample04061424 AND  /[0][8]0{2,2}/                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 72          |        |           |
      | tag:sample04061424 \| eval len=if(empty(apache.resp_len),0,1) \| stats top(len,10)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 72          |        |           |
      | tag:sample04061424 \| eval is_resplen_empty=empty(apache.resp_len) \| eval res_str=if(is_resplen_empty,"repslen_empty","resplen_non_null") \| table apache.resp_len, is_resplen_empty, res_str \| where is_resplen_empty==true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 72          | 2      | 3         |
      | tag:sample04061424 AND apache.resp_len:* \| eval res_mul=apache.resp_len*apache.status*0 - apache.resp_len*apache.status/apache.status%1000 \| eval r_add=apache.resp_len+apache.status*10-apache.resp_len-9*apache.status \| eval res_concat = appname + apache.clientip + apache.geo.city \| table res_mul, r_add, res_concat                                                                                                                                                                                                                                                                                                                                                                                 | 70          | 70     | 3         |
      | tag:"sample04061424" AND apache.resp_len:>2000 \| eval resplen=apache.resp_len \| eval status=apache.status \| eval mid=apache.resp_len+apache.status \| eval res_mul=(apache.resp_len+apache.status)*apache.status \| table resplen, status, mid, res_mul                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 29          |        | 4         |
      | tag:"sample04061424_json_sdyd_float_59" \| eval res_empty=empty(json.cpuTime) \| eval res_not_empty=!empty(json.cpuTime) \| eval res_true=empty(json.cpuTime) \|\| true \| eval res_false= false && empty(json.cpuTime) \| table json.cpuTime, res_empty, res_not_empty, res_true, res_false                                                                                                                                                                                                                                                                                                                                                                                                                    | 59          |        | 5         |
      | tag:"sample04061424" AND NOT apache.status:200 \| eval not200_true=apache.status!=200 \| eval is200_false=apache.status==200 \| eval big200_true=apache.status>200 \| eval bigto200_true=apache.status>=200 \| eval small200_false=apache.status<200 \| eval smallto200_false=apache.status<=200 \| eval res_other200=if(apache.status==200,"equal200","other200") \| eval res_not200=if(apache.status!=200,"not200","error") \| table apache.status, not200_true, is200_false, big200_true, bigto200_true,small200_false,smallto200_false,res_other200, res_not200                                                                                                                                             | 23          |        | 9         |
      | tag:sample04061424_json_sdyd_float_59 \|  eval r_abs=abs(json.duration) \| eval r_ceil=ceil(json.duration) \| eval r_floor=floor(json.duration) \| table json.duration,r_abs, r_ceil, r_floor                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 59          |        | 4         |
      | tag:sample04061424_json_sdyd_41 \| eval res_ceil=ceil(json.cpuTime) \| eval res_floor=floor(json.cpuTime) \| eval res_min=min(json.execTime,json.responseTime) \| eval res_max=max(json.execTime,json.responseTime) \| eval res_log_time=log(agent_send_timestamp) \|table res_ceil, res_floor, res_min, res_max, res_log_time                                                                                                                                                                                                                                                                                                                                                                                  | 37          |        | 5         |
      | tag:sample04061424_json_sdyd_41  \| eval r_min=min(json.execTime,json.responseTime) \| eval r_max=max(json.execTime,json.responseTime) \| eval r_log_time=log(agent_send_timestamp) \|table r_min, r_max, r_log_time                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 41          |        |           |
      | tag:sample04061424_json_sdyd_float_59 \| eval r_len_e=len(json.application) \| eval r_len_c=len(json.name) \| table json.application, json.name, r_len_e, r_len_c                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 59          |        |           |
      | tag:sample04061424 AND NOT apache.resp_len:* \| eval a = coalesce(apache.resp_len,apache.status) \| eval b = coalesce(apache.status,apache.resp_len) \| table a, b                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 2           | 2      |           |
      | tag:sample04061424 AND NOT apache.status:200\| eval r_status = "status: " + case(apache.status==200, "ok", apache.status==400, "bad", apache.status>=500, "other", default, "error") \| table apache.status, r_status                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 23          |        |           |
      | tag:"sample04061424"  AND apache.status:404 \| eval res_case=case(apache.status==200,"status=200",apache.status>=301,"apache>=301",apache.status==304,"apache==304",default,"apache=other") \| table apache.status, res_case                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 11          |        |           |
      | tag:sample04061424 AND apache.status:>=301 \| eval r_status=case(apache.status==200,"status=200",apache.status<=301,"apache<=301",apache.status==304,"apache==304",default,"apache=other") \| table r_status                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 22          |        | 1         |
      | tag:sample04061424 OR  tag:sample04061424_json_sdyd_41 \| eval test=case(logtype=="json", json.cpuTime, logtype=="apache", apache.resp_len) \| table test                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 113         |        | 1         |
      | tag:"sample04061424" AND apache.request_path:* \| eval r_upper=upper(apache.request_path) \| eval r_lower=lower(apache.request_path) \| table r_upper, r_lower                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 72          |        | 2         |
      | tag:"sample04061424" \| eval r_match =match(apache.clientip, "\\\d{1,3}\\\.\\\d{1,3}\\\.\\\d{1,3}\\\.\\\d{1,3}") \| table apache.clientip, r_match                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 72          | 72     | 2         |
      | tag:"sample04061424" AND apache.request_query:* \| eval r_match1 = match(apache.request_query, "b.*e") \| eval r_match2 = match(apache.request_query, "^bcd") \| table apache.request_query, r_match1, r_match2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 55          |        |           |
      | tag:"sample04061424" \| eval res_to_str=tolong("123") \| eval res_to_long=tolong(20.3) \| table res_to_str, res_to_long                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 72          |        |           |
      | tag:"sample04061424" \| eval r_frm_str=todouble("123.1")  \| eval r_frm_long = todouble(20) \| eval res=r_frm_str+20\| eval t_frm_str = typeof(r_frm_str) \| eval t_frm_long = typeof(r_frm_long) \| eval t_res = typeof(res) \| table r_frm_str, t_frm_str, r_frm_long,t_frm_long, res,t_res                                                                                                                                                                                                                                                                                                                                                                                                                   | 72          |        | 6         |
      | tag:sample04061424_json_sdyd_41 \| eval t_cputime = typeof(json.cpuTime) \| eval t_actionName=typeof(json.actionName) \| eval t_failed=typeof(json.failed) \| eval t_time=typeof(agent_send_timestamp)  \| eval t_dimensions_ip=typeof(json.dimensions.IP) \| table t_cputime, t_actionName,t_failed,t_time,t_dimensions_ip                                                                                                                                                                                                                                                                                                                                                                                     | 41          |        | 5         |
      | tag:"sample04061424" \| eval t = "logtype:" + logtype \| where tostring(t) == "logtype:apache" && tostring(apache.clientip) == "23.166.125.53" && tostring(appname) == "apache" \| table apache.clientip, appname, t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 72          | 13     | 3         |
      | tag:"sample04061424" apache.method:GET \| eval x = parsedate("28/04/2016:12:01:01","dd/MM/yyyy:HH:mm:ss") \| eval y = parsedate("28/04/2016","dd/MM/yyyy") \| table x,y                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 72          | 2      | 2         |
      | tag:"sample04061424" apache.method:GET \| eval r_formatdate = formatdate(timestamp, "HH:mm:ss:SSS MM/dd/yyyy") \| table timestamp, r_formatdate                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 72          |        |           |
      | tag:"sample04061424" \| eval x_format = format("%s, %s => %s", logtype, tag, apache.clientip) \| table x_format                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 72          |        |           |
      | tag:"sample04061424" \| eval r_isnum = isnum(apache.status) \| eval r_isstr = isstr(apache.method) \| table r_isnum, r_isstr                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 72          |        |           |
      | tag:"sample04061424" \| eval r_relative = relative_time(timestamp, "-1d/d") \| eval r_format_relative = formatdate(r_relative, "HH:mm:ss:SSS MM/dd/yyyy") \| eval r_format_timestamp = formatdate(timestamp, "HH:mm:ss:SSS MM/dd/yyyy") \| table timestamp, r_format_timestamp, r_relative, r_format_relative                                                                                                                                                                                                                                                                                                                                                                                                   | 72          |        |           |
      | tag:sample04061424_urldecode_apache_10 AND apache.request_query:* \| eval r_decode = urldecode(apache.request_query) \| table apache.request_query,r_decode                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 9           |        | 2         |
      | tag:"sample04061424" \| eval r_m130 = cidrmatch("192.168.1.130/25", "192.168.1.129") \| eval r_m128 = cidrmatch("192.168.1.128/25", "192.168.1.129") \| eval r_m255 = cidrmatch("192.168.1.255/25", "192.168.1.129") \| table r_m130, r_m128, r_m255                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 72          |        | 3         |
      | tag:"sample04061424" \| eval method = apache.method \| stats count() as count1, avg(apache.resp_len) as avg_len by method, apache.status                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 72          | 6      |           |
      | tag:"sample04061424" \| stats avg(apache.resp_len) as avg_length by apache.status  \| sort by avg_length \| eval eval_length = avg_length + 200                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 72          |        |           |
      | tag:"sample04061424" \| stats avg(apache.resp_len) as avg_length by apache.status \| eval eval_length = avg_length + 200 \| sort by eval_length                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 72          |        |           |
      | starttime = "-5h/h" endtime = "now" tag:"sample04061424" \| transaction apache.clientip startswith="Android" endswith="Dalvik" maxspan=5s maxevents=50 maxopentxn=1000 maxopenevents=1000                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |             |        |           |
      | starttime = "-5h/h" endtime = "now" tag:"sample04061424" \| transaction apache.clientip startswith="Android" endswith="AndroidPhone" maxspan=1d maxevents=50 maxopentxn=1000 maxopenevents=1000                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |             |        |           |
      | tag:"sample04061424" \| transaction apache.resp_len \| stats count(apache.resp_len)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 72          | 1      | 1         |
      | tag:"sample04061424" \| transaction apache.status, apache.method \| stats count() as cnt                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 72          | 1      | 1         |
      | tag:"sample04061424" \| stats count(apache.status),min(apache.status),max(apache.status),avg(apache.status),sum(apache.status), es(apache.status) by apache.clientip                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 72          | 27     |           |
      | tag:"sample04061424" \| stats count(apache.status),min(apache.status),max(apache.status),avg(apache.status),sum(apache.status), extend_stat(apache.status) by apache.clientip                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 27          | 27     |           |
      | tag:"sample04061424" \| where apache.status>400 \| stats dc(apache.status)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 22          | 1      | 1         |
      | tag:"sample04061424" \| where apache.status>400 \| stats es(apache.status)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 22          |        |           |
      | tag:"sample04061424" \| where apache.status>400 \| stats extend_stat(apache.status)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 22          |        |           |
      | tag:"sample04061424" \| stats count() as cnt by apache.status                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 72          | 6      |           |
      | tag:"sample04061424" \| top 50 apache.resp_len                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 72          |        | 3         |
      | starttime="-3d/d" endtime="now" tag:"sample04061424" \| top 50 apache.resp_len                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |             |        |           |
      | tag:"sample04061424" \| top 3 apache.clientip by apache.request_path                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 72          | 15     | 2         |
      | tag:"sample04061424" \| stats count() as cnt, max(apache.status) as r_max by apache.clientip \| stats avg(cnt) by r_max                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 72          |        | 2         |
      | tag:"sample04061424" \| top 11 apache.clientip countfield=clientip_count  percentfield=clientip_percent                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 72          | 11     |           |
      | tag:"sample04061424" \| bucket timestamp span=1h as ts \| stats count(apache.clientip) as c_ip by ts                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 72          |        | 2         |
      | tag:"sample04061424" \| bucket timestamp span=10m as ts\|stats count(appname) as count_app by ts\|eval time=formatdate(ts)\| autoregress count_app p=6\|eval rate=if(empty(count_app_p6),0,abs(count_app_p6-count_app)) \| eval result=if(empty(count_app_p6),0,1) \|where result>0\|fields count_app,time,count_app_p6,rate                                                                                                                                                                                                                                                                                                                                                                                    | 72          | 25     | 4         |
      | tag:"sample04061424" \| bucket timestamp span=3h as ts\| stats count(appname) as count_ by ts\| movingavg count_,5 as ma\| rollingstd count_,5 as rs\| eval lower=ma-1*rs\| eval upper=ma+1*rs\| eval outlier=if(count_>upper\|\|count_<lower, count_, 0)                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 72          | 9      | 7         |
      | starttime="-5h/h" endtime="now" tag:"sample04061424" \| bucket timestamp timeranges=((MIN,-2h),(-2h,-1h),(-1h,MAX)) as ts \| table ts                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 72          | 3      | 2         |
      | tag:"sample04061424" AND apache.resp_len:* \| eval res_min=min(apache.status,apache.resp_len) \| eval res_max=max(apache.status,apache.resp_len) \| table res_min,res_max                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 70          |        |           |
      | tag:"sample04061424" \| transaction apache.resp_len \| where _count==4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 72          |        |           |
      | tag:"sample04061424" \| transaction apache.resp_len \| where _duration==1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 72          |        |           |
      | tag:"sample04061424" \| transaction apache.clientip endswith=eval(apache.status == 200) maxevents=10 contains="Dalvik"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 72          |        |           |
      | tag:"sample04061424" \| transaction apache.resp_len \| sort by apache.resp_len                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 72          |        |           |
      | tag:"sample04061424" \| stats count() as cnt, max(apache.status) as r_max by apache.clientip \| top 3 cnt                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 72          | 3      | 3         |
      | tag:"sample04061424" \| sort by +apache.status,+apache.resp_len\| table apache.status, apache.resp_len                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 72          |        |           |
      | tag:"sample04061424" \| stats avg(apache.resp_len) as avg_length, count(apache.clientip) as ip_count by apache.status \| sort by ip_count                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 72          | 6      |           |
      | starttime="-5h/h" endtime="now" tag:"sample04061424" \| bucket timestamp timeranges=((-2d, -1d),(-1d, MAX),(2018-04-08:00:00:00, 2018-04-09:00:00:00)) as tr \| stats count(appname) as ct by tr                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |             | 3      | 2         |
      | tag:"sample04061424" \| rename apache.status as "status_1" \| table apache.status,status_1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 72          |        | 1         |
      | tag:"sample04061424" \| rename apache.status as "状态码" \| table '状态码'                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 72          |        | 1         |
      | tag:"sample04061424" \| where  apache.status > 200 && apache.status < 400 \| table apache.status                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 72          | 1      | 1         |
      | tag:"sample04061424"\| limit 10                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 72          |        |           |
      | starttime="-5h/h" endtime="now" tag:"sample04061424" \| stats count() as count_res by appname,apache.clientip \| fields apache.clientip, count_res                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 72          | 27     | 2         |
      | tag:"sample04061424" AND [[ tag:"sample04061424"  \| stats count(apache.clientip) as count_ by apache.clientip \| sort by count_ \| limit 1 \| fields apache.clientip ]]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 13          |        |           |
      | tag:"sample04061424" AND [[tag:"sample04061424" \| stats es(apache.status) by apache.method \| fields apache.method]]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 72          |        |           |
      | tag:"sample04061424"\| stats count(apache.clientip) by apache.clientip, apache.method \| limit 2 \| fields apache.clientip apache.method                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 24          |        |           |
      | [[ tag:"sample04061424"  \| stats count(apache.clientip) as count_ by apache.clientip \| sort by count_ \| limit 1  ]]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 无           |        |           |
      | tag:"sample04061424" \| stats dc(apache.status) as dc_count by apache.method \| join apache.method [[ tag:"sample04061424" \| stats count(apache.status) as cnt by apache.method \| append [[ tag:"sample04061424" \| stats count() as total ]] ]]                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 72          |        |           |
      | starttime="-d/d" endtime="now/d" tag:"sample04061424"  \| append [[ starttime="-5h" endtime="now" tag:"sample04061424" apache.status:200 AND apache.method:"GET" \| append [[ tag:"sample04061424" \| stats count() as cnt by apache.status]] ]]                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 12          |        |           |
      | tag:"sample04061424" \| stats avg(apache.status) by apache.clientip \| join type=left apache.clientip [[ tag:"sample04061424" AND apache.clientip:23.166.125.53 \| stats sum(apache.status) by apache.clientip ]]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 72          | 27     | 3         |
      | tag:"sample04061424" \| stats count(logtype) as count_all by apache.geo.isp \| sort by count_all \| limit 20 \| join type=left apache.geo.isp [[tag:"sample04061424" AND apache.status:[400 TO 499] \| stats count(logtype) as count_400l by apache.geo.isp]] \| join type=left apache.geo.isp [[tag:"sample04061424" AND apache.status:[500 TO 599] \| stats count(logtype) as count_500l by apache.geo.isp]]                                                                                                                                                                                                                                                                                                  | 72          | 14     | 4         |
      | tag:"sample04061424" \| stats avg(apache.status) by apache.clientip \| join type=inner apache.clientip [[ tag:"sample04061424" AND apache.clientip:23.166.125.53 \| stats sum(apache.status) by apache.clientip ]]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 72          | 1      |           |
      | starttime = "-5h/h" endtime = "now" tag:"sample04061424" \| fields apache.clientip, apache.method \| join type=inner apache.clientip [[starttime = "-5h/h" endtime = "now" tag:"sample04061424" \| stats avg(apache.status) as sub_status by apache.clientip ]]                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 72          |        |           |
      | tag:"sample04061424" \| bucket timestamp span=1h as ts \| stats count() as ip_count by apache.clientip,ts \| join type=left ts [[ tag:"sample04061424" \| bucket timestamp span=1h as ts \| stats count() as hour_count by ts ]] \| eval ippercent=100 * ip_count / hour_count \| eval r_fomart = formatdate(ts)                                                                                                                                                                                                                                                                                                                                                                                                | 72          | 297    |           |
      | tag:"sample04061424" \| stats count(logtype) as count_all by apache.geo.isp \| sort by count_all \| limit 5 \| join type=left apache.geo.isp[[logtype:"apache" AND apache.status:[400 TO 499]\|stats count(logtype) as count_400 by apache.geo.isp]]\|join type=left apache.geo.isp [[logtype:"apache" AND apache.status:[500 TO 599]\|stats count(logtype) as count_500 by apache.geo.isp]]\|join type=left apache.geo.isp [[logtype:"apache" AND apache.resp_len:>1000\|stats count(logtype) as len_1000 by apache.geo.isp]]\|eval rate_400=if(empty(count_400),0,count_400/count_all)\|eval rate_500=if(empty(count_500),0,count_500/count_all)\|eval rate_len_1000=if(empty(len_1000),0,len_1000/count_all) | 72          | 5      | 8         |
      | tag:"sample04061424" \| stats count() by hostname \| lookup user,department /data/rizhiyi/share/host_user.csv on hostname = host                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 72          | 1      | 5         |
      | tag:"sample04061424" \| stats avg(apache.resp_len) as status,count(apache.resp_len) by apache.clientip \| save /data/rizhiyi/spldata/apache_latency.csv                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 72          | 27     | 2         |
      | tag:"sample04061424" \| bucket timestamp span=1h as ts \| stats sum(apache.resp_len) as sum_resp_len by ts  \| rollingstd sum_resp_len,10 as resp_len_rolling_std                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 72          |        |           |
      | tag:"sample04061424"\|bucket timestamp span=1h as ts \| stats sum(apache.resp_len) as sum_resp_len by ts \| eval time=formatdate(ts)\| movingavg sum_resp_len,3 as moving_avg_resp_len                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 72          |        |           |
      | starttime="-5h/h" endtime="now" tag:"sample04061424" \| bucket timestamp span=10m as ts \| stats count(appname) as count_app by ts \| eval time=formatdate(ts) \| autoregress count_app p=6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 72          | 32     |           |
      | starttime="-5h/h" endtime="now" tag:"sample04061424"\| bucket timestamp span=10m as ts \| stats count(appname) as count_app by ts\|eval time=formatdate(ts)\| autoregress count_app p=6\|eval rate=if(empty(count_app_p6),0,abs(count_app_p6-count_app)) \| eval result=if(empty(count_app_p6),0,1) \| where result>0\|fields count_app,time,count_app_p6,rate                                                                                                                                                                                                                                                                                                                                                  | 72          | 26     |           |
      | tag:"sample04061424" \| eval  avg_resp_len = apache.resp_len \| autoregress avg_resp_len p=1-2 \| eval res_avg = (avg_resp_len + avg_resp_len_p2 + avg_resp_len_p1) / 3 \| top 3 res_avg                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 72          | 3      |           |
      | starttime="-1d/d" endtime="now/d"  tag:"sample04061424" \| stats avg(apache.resp_len) as avg_resp_len \| append [[ starttime="now/d" endtime="now" tag:"sample04061424" \| stats avg(apache.resp_len) as avg_resp_len]]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |             | 2      |           |
      | starttime="-1d/d" endtime="now"  tag:"sample04061424" \| bucket timestamp span=5h as ts \| stats max(apache.resp_len)as count_1 by ts \| eval time=formatdate(ts) \| eval line="max_line" \| append [[starttime="-5h/h" endtime="now"  tag:"sample04061424" \| bucket timestamp span=5h as ts \| stats max(apache.resp_len) as count_2 by ts \| eval time=formatdate(ts)\|eval line="count_line"]]                                                                                                                                                                                                                                                                                                              |             | 2      | 5         |
      | tag:"sample04061424" \| stats count(apache.clientip)  \| append [[ index=schedule * \| stats count(apache.clientip) ]]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 72          |        | 1         |
      | tag:"sample04061424" \| stats avg(apache.resp_len) \| eval day="the day today" \| append [[ starttime="-1d/d" endtime="now/d" * \| stats avg(apache.resp_len) \| eval day="yesterday" ]]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 72          | 2      | 2         |
      | tag:"sample04061424" \| bucket timestamp span=1h as ts \| stats es(apache.status) by ts                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 72          | 6      |           |
      | tag:"sample04061424_urldecode_apache_10" \| eval new_time=formatdate(timestamp, "yyyy-MM-dd HH:mm:ss") \| table apache.status,apache.method,timestamp,new_time                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 10          |        | 4         |
      | tag:"sample04061424" \| table apache.status, apache.method, appname, tag \| fields  appname, tag, apache.status, apache.method                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 72          |        | 4         |
      | tag:"sample04061424" \| stats count() as cnt, max(apache.status) as r_max by apache.clientip \| stats max(cnt),max(r_max)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 72          | 1      | 2         |
      | tag:"sample04061424" \| stats count() as cnt, max(apache.status) as r_max_status by apache.clientip \| top 3 r_max_status                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 72          | 3      | 3         |
      | tag:"sample04061424" \| parse field=apache.clientip "(?<ip_addr>\d+\.\d+\.\d+\.\d+)" \| eval ip_str = "ip:" + ip_addr  \| stats count(appname) by ip_str                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 72          | 27     | 2         |
      | tag:"sample04061424" \| parse field=apache.request_path "^(?<outer_path>/[^/]*)" \| stats count(appname) by outer_path                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 72          | 4      | 2         |
      | tag:"sample04061424" \| stats count() as cnt by apache.method, apache.status \| transpose row=apache.method column=apache.status valuefield=cnt                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 72          | 1      | 7         |
      | tag:"sample04061424" \| stats pct(apache.status,1,5,25,50,75,95,99) as pct_ by apache.method \| transpose row=pct_.1 column=apache.method valuefield=pct_.5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 72          | 1      | 2         |
      | tag:"sample04061424" \| table apache.geo.longitude,apache.geo.latitude,apache.geo.city \| transpose  row=apache.geo.longitude column=apache.geo.latitude valuefield=apache.geo.city                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 72          |        |           |
      | tag:"sample04061424" \| eval long=apache.geo.longitude \| eval lat=apache.geo.latitude \| eval city=apache.geo.city  \| table long, lat, city \| transpose row=lat column=long valuefield=city                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 72          |        |           |
      | starttime="-1d/h" endtime="now/h" tag:"sample04061424"\|bucket timestamp span=1h as ts\|stats count() as count_app by ts\|eval time=formatdate(ts)\|autoregress count_app p=3 \|transpose row=ts column=time valuefield=count_app                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 72          |        |           |
      | starttime="-w/w" endtime="now" tag:"sample04061424" \| bucket timestamp span=1d as ts \| stats count() as cnt by ts \| esma cnt timefield=ts                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |             |        |           |
      | starttime="-w/w" endtime="now" tag:"sample04061424" \| bucket timestamp span=1d as ts \| stats avg(apache.resp_len) as cnt by ts \| esma cnt timefield=ts \| eval r_fmt_time=formatdate(ts)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |             |        | 6         |
      | starttime="-w/w" endtime="now" logtype:apache \| bucket timestamp span=1d as ts \| stats count() as cnt by ts \| esma cnt timefield=ts futurecount=30 \|eval new_tt=formatdate(ts)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |             | 44     | 6         |
      | starttime="now-7d/d" endtime="now/d" tag:"sample04061424" \| bucket timestamp span=1h as ts \| stats avg(apache.status) as avg_ by ts \| esma avg_ timefield=ts futurecount=24 \| eval r_fmt=formatdate(ts)  \| where typeof(_predict_avg_)=="double" \| eval time = formatdate(ts, "HH:mm") \| table time, _predict_avg_ \| join type=left time [[ starttime="now/d"  tag:"sample04061424" \| bucket timestamp span=1h as ts \| stats avg(apache.status) as avg_ by ts \| eval time = formatdate(ts, "HH:mm") \| table time, avg_ ]]                                                                                                                                                                           |             |        | 3         |
      | tag:"sample04061424" \| dedup 3 apache.status \| sort by apche.resp_len                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 72          |        |           |
      | tag:"sample04061424" \| dedup 3 apache.version keepevents=true \| sort by timestamp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 72          |        |           |
      | tag:"sample04061424" \| dedup 3 apache.method, appname keepevents = true \| sort by timestamp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 72          |        |           |
      | tag:"sample04061424" \| dedup 3 apache.status,appname keepevents = false \|sort by timestamp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 14          |        |           |
      | tag:"sample04061424" AND logtype:apache AND (NOT apache.request_query:*) \|dedup appname,apache.request_query  keepempty = true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 17          |        |           |
      | tag:"sample04061424" AND logtype:apache AND (NOT apache.request_query:*) \| dedup appname,apache.request_query keepempty = false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 17          |        |           |
      | tag:"sample04061424" \| eval f_agent_send = formatdate(agent_send_timestamp) \| eval f_collector_recv = formatdate(collector_recv_timestamp) \| eval f_timestamp = formatdate(timestamp) \| table agent_send_timestamp, f_agent_send, collector_recv_timestamp, f_collector_recv, timestamp,f_timestamp, raw_message                                                                                                                                                                                                                                                                                                                                                                                            | 72          |        |           |
      | index=yotta* starttime="-5h" endtime="now" * \| sort by timestamp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |             |        |           |
      | index=yotta* starttime="-5h" endtime="now" * \| sort by +timestamp \| table timestamp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |             |        |           |
      | index=* starttime="-50h" endtime="now" * \| top 10 appname \| limit 10                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |             | 10     |           |
      | index=* starttime="-50h" endtime="now" * \| top 10 appname \| limit 10 \|sort by count                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |             | 10     |           |
      | index=* starttime="-50h" endtime="now" * \| stats count() as ct by appname \| limit 10                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |             | 10     |           |
      | index=* starttime="-50h" endtime="now" * \| stats count() as ct by appname \| limit 10 \| sort by +ct                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |             | 10     |           |
      | tag:sample04061424 \| eval trade_time=todouble(apache.resp_len) \| where trade_time>0.0 \| stats count() as count_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 47,69       | 1      | 1         |
      | tag:sample04061424 AND apache.resp_len:>0 \| eval trade_time=todouble(apache.resp_len) \| where trade_time>0.1 \| stats count() as count_                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 69          | 1      | 1         |
      | tag:"sample04061424" \| stats count() as cnt by apache.status \| stats extend_stat(cnt)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 72          | 1      | 8         |
      | tag:"sample04061424" \| stats max(timestamp) by apache.method \| eval a = if(empty(apache.method), 1, 0)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 72          |        |           |
      | tag:"sample04061424" \| stats max(apache.status) as value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | 72          | 1      | 1         |
      | tag:"t_with" \| transaction json.sid with states json.a,json.b,json.c in json.module results by flow                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 无           |        |           |
      | tag:"sample04061424" \| stats count(apache.status) as status by apache.clientip \| sort by +status                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 72          | 27     |           |
      | tag:"sample04061424" \| eval aaa = formatdate(timestamp, "yyyy-MM-dd", "Asia/Shanghai") \| table aaa,timestamp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 72          | 72     | 2         |
      | starttime="-5h/h" endtime="now" tag:"sample04061424"\| bucket timestamp span=10m as ts\|stats count(appname) as count_app by ts \| eval time=formatdate(ts)\| eval time_dis=formatdate(now()-ts, "HH:mm:ss")\|where ts>now()-18000000                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 30          | 30     | 4         |
      | tag:no \| stats count() as cnt by apache.status \| stats dc(cnt)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |             |        |           |
      | * \| stats count() as cnt \| eval ttt = cnt + "  试试中文下载内容，⚠️"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |             |        |           |
      | index=* tag:"sample04061424" \| transaction apache.status maxevents=10 \| bucket min_timestamp span=5m as ts \| stats avg(_duration) as base_len, count() as base_count, es(_duration) by ts                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 72          |        |           |
      | tag:"sample04061424"\| stats avg(apache.resp_len) as avg_len by apache.clientip                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 72          |        |           |
      | tag:"sample04061424"  AND /[4][0-9][0-9][0-9]/                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 9           |        |           |
      | tag:"sample04061424" \| stats es(apache.status),count(apache.status),max(apache.status),min(apache.resp_len),sum(apache.status),avg(apache.status) by apache.geo.city                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 72          |        |           |
      | tag:"sample04061424" \| stats rb(apache.status,(200,201),(301,302),(302,303),(304,305),(306,500)),top(apache.status,20),distinct_count(apache.status)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 72          |        |           |
      | tag:"sample04061424" \| transaction apache.status  \| stats  min(apache.status)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 72          | 1      | 1         |
      | tag:"sample04061424" AND apache.referer_domain:* \| eval r_subdomain= substring(apache.referer_domain,0,len(apache.referer_domain)) \| eval r_trim=trim("中文 ") \| eval r_eng=trim(" "+apache.referer_domain + " ") \| eval r_cat = r_trim+r_eng+"_"+r_subdomain \| table r_subdomain, r_cat                                                                                                                                                                                                                                                                                                                                                                                                                     | 40          |        |           |
      | tag:"sample04061424" \| stats dc(apache.request_query)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 72          | 1      | 1         |
      | tag:"sample04061424" AND apache.request_query:* \| stats count(apache.request_query) as r_q by  apache.clientip, apache.request_query, tag                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 55          |        | 4         |
      | tag:"sample04061424" \| stats count()                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 72          | 1      | 1         |
      | index=* tag:sample04061424                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 72          |        |           |
      | tag:"sample04061424" \| eval m_ips=split(apache.clientip, ".") \| eval m_paths=split(apache.request_path, "/") \| table m_ips, m_paths                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 72          | 72     | 2         |
      | tag:"sample04061424" \| where !empty(apache.request_query) \| eval m_querys = split(apache.request_query, "=") \| table m_querys,apache.request_query                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 72          | 70     | 2         |
      | tag:"sample04061424" \| eval m_ips=split(apache.clientip, ".") \| eval m_paths=split(apache.request_path, "/") \| eval m_ips_count = mvcount(m_ips) \| eval m_paths_count = mvcount(m_paths)  \| table m_ips, m_paths,m_ips_count, m_paths_count                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 72          | 72     | 4         |
      | tag:"sample04061424" \| eval fullName=mvappend(apache.clientip, "middle value", apache.method) \| table apache.clientip, apache.method,fullName                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 72          | 72     | 3         |
      | tag:"sample04061424" \| eval m_ips=split(apache.clientip, ".") \| eval m_paths=split(apache.request_path, "/") \| eval m_ips_count = mvcount(m_ips) \| eval m_paths_count = mvcount(m_paths)  \| eval r_count_append=mvappend('m_ips_count', 'm_paths_count') \| table m_ips_count, m_paths_count, r_count_append                                                                                                                                                                                                                                                                                                                                                                                               | 72          | 72     | 3         |
      | tag:"sample04061424" AND apache.referer_domain:m5.baidu.com \| eval m_referers=split(apache.referer, "%") \| eval r_dup = mvdedup(m_referers) \| table m_referers, r_dup                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 10          | 10     | 2         |
      | tag:"sample04061424" AND apache.referer_domain:m5.baidu.com  \| eval m_referers=split(apache.referer, "%") \| eval m_referers_find=mvfind(m_referers, "E4") \| table m_referers, m_referers_find                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 10          | 10     | 2         |
      | tag:"sample04061424" AND apache.referer_domain:m5.baidu.com  \| eval m_referers=split(apache.referer, "%") \| eval m_referers_find=mvfind(m_referers, "http://m5.baidu.com/s?from=124n&word=") \| table m_referers, m_referers_find                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 72          | 10     | 2         |
      | tag:"sample04061424" AND apache.referer_domain:m5.baidu.com  \| eval m_referers=split(apache.referer, "%") \| eval m_referers_find=mvfind(m_referers, "http://m5.baidu.com/s?from=124n&word=ii") \| table m_referers, m_referers_find                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 72          | 10     | 2         |
      | tag:"sample04061424" AND apache.referer_domain:m5.baidu.com  \| eval m_referers=split(apache.referer, "%") \| eval m_referers_index= mvindex(m_referers, 0) \| table m_referers, m_referers_index                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 72          | 10     | 2         |
      | tag:"sample04061424" AND apache.referer_domain:m5.baidu.com  \| eval m_referers=split(apache.referer, "%") \| eval m_referers_index= mvindex(m_referers, 1,4) \| table m_referers, m_referers_index                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 72          | 10     | 2         |
      | tag:"sample04061424" \| eval m_ips=split(apache.clientip, ".") \| eval m_ips_join = mvjoin(m_ips, ", ") \| table m_ips,m_ips_join                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 72          | 72     | 2         |
      | tag:"sample04061424" \| eval m_ips=split(apache.clientip, ".") \| eval r_mvsort= mvsort(m_ips) \| table m_ips, r_mvsort                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 72          |        | 2         |
      | tag:"sample04061424" \| eval m_ips=split(apache.clientip, ".") \| eval m_paths=split(apache.request_path, "/") \| eval r_zips = mvzip(m_ips,m_paths) \| eval zips_count = mvcount(r_zips) \| table m_ips, m_paths, r_zips, zips_count                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 72          | 72     | 4         |
      | tag:"sample04061424" \| eval m_ips=split(apache.clientip, ".") \| eval m_paths=split(apache.request_path, "/") \| eval r_zips = mvzip(m_ips,m_paths) \| eval zips_count = mvcount(r_zips) \| eval zips_idx=mvindex(r_zips,2) \| table m_ips, m_paths, r_zips, zips_count,zips_idx                                                                                                                                                                                                                                                                                                                                                                                                                               | 72          | 72     | 5         |
      | tag:"sample04061424" AND apache.referer_domain:m5.baidu.com \| eval m_referers=split(apache.referer, "%") \| eval m_referers_filter = mvfilter(m_referers, _x == "E4") \| table apache.referer, m_referers, m_referers_filter                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 10          | 10     | 3         |
      | tag:"sample04061424" AND apache.referer_domain:m5.baidu.com \| eval m_referers=split(apache.referer, "%") \| eval m_referers_filter = mvfilter(m_referers, _x == "E4erqe") \| table apache.referer, m_referers, m_referers_filter                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 10          | 10     | 3         |
      | tag:"sample04061424" \| eval base=mvrange(1,6) \| table base                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 72          | 72     |           |
      | tag:"sample04061424" \| eval base=mvrange(1,6,2) \| table base                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 72          |        |           |
      | tag:"sample04061424" \| eval base=mvrange(10,2,-3) \| table base                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 72          |        |           |
      | tag:"sample04061424" \| table hostname, apache.status \| limit 1 \| map "tag:"sample04061424" hostname:$hostname$ apache.status:>$apache.status$ "                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 72          | 23     |           |
      | index=* tag:"sample04061424" \| table hostname, apache.status \| limit 1 \| map "tag:"sample04061424" hostname:$hostname$ apache.status:>$apache.status$ *" \| fields apache.resp_len, apache.status, timestamp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 72          | 23     | 3         |
      | tag:"sample04061424" \| stats max(timestamp) as max_time \| eval start=max_time-5*3600000 \| eval start_f = formatdate(tolong(start), "yyyy-MM-dd:HH:mm:ss") \| eval end_f = formatdate(tolong(max_time+3600000), "yyyy-MM-dd:HH:mm:ss")  \|  map " starttime=$start_f$ endtime=$end_f$ tag:"sample04061424"  AND /0{2,2}/ " \| table apache.resp_len, apache.status                                                                                                                                                                                                                                                                                                                                            | 72          | 19     | 2         |
      | tag:"sample04061424" \| stats max(timestamp) as max_time \| eval start=max_time \| eval start_f = formatdate(tolong(start-5*360000), "yyyy-MM-dd:HH:mm:ss")  \| eval end_f = formatdate(tolong(max_time+360000), "yyyy-MM-dd:HH:mm:ss")  \|  map " starttime=$start_f$ endtime=$end_f$ tag:"sample04061424"  AND "android" "                                                                                                                                                                                                                                                                                                                                                                                    | 72          | 52     |           |
      | tag:"sample04061424" \| stats max(timestamp) as max_time \| eval start_f = formatdate(tolong(max_time-86400000*3), "yyyy-MM-dd:HH:mm:ss")  \| eval end_f = formatdate(tolong(max_time+6000000), "yyyy-MM-dd:HH:mm:ss")  \|  map " starttime=$start_f$ endtime=$end_f$ tag:"sample04061424"  " \| table start_f, end_f, tag, apache.resp_len,timestamp                                                                                                                                                                                                                                                                                                                                                           | 72          | +144   |           |
      | tag:"sample04061424"  \| table hostname, apache.status \| limit 1  \| map "tag:"sample04061424" hostname:$hostname$ apache.status:>$apache.status$ \| stats count()"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 72          | 1      | 1         |
      | tag:"sample04061424" \| table apache.status, apache.method \| limit 1 \| rename apache.status as status \| map "apache.status:$status$ apache.method:$apache.method$ tag:sample04061424 \| stats count() "                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 72          | 1      | 1         |
      | tag:"sample04061424" \| table apache.status, apache.method \| limit 1 \| rename apache.status as status\| eval opt_name="stats" \| map "apache.status:$status$ apache.method:$apache.method$ tag:sample04061424 \| $opt_name$ count() "                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 72          | 1      | 1         |
      | tag:"sample04061424" \| table hostname, apache.status \| limit 1 \| map " hostname:$hostname$ apache.status:>$apache.status$ \| table apache.status,hostname \| sort by -apache.status"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 72          |        | 2         |
      | tag:"sample04061424" \| stats max(timestamp) as max_time \| eval start=max_time \| eval start_f = formatdate(tolong(start-5*360000), "yyyy-MM-dd:HH:mm:ss")  \| eval end_f = formatdate(tolong(max_time+360000), "yyyy-MM-dd:HH:mm:ss")  \|  map " starttime=$start_f$ endtime=$end_f$ * " \| table appname,tag                                                                                                                                                                                                                                                                                                                                                                                                 | 72          |        | 2         |
      | index=* tag:"sample04061424" \| stats min(timestamp) as min_time \| eval start=min_time-360000 \| eval start_f = formatdate(tolong(start), "yyyy-MM-dd:HH:mm:ss") \| eval end_f = formatdate(tolong(min_time+360000), "yyyy-MM-dd:HH:mm:ss") \| eval index_name="index" \| map " $index_name$=* starttime=$start_f$ endtime=$end_f$ *"                                                                                                                                                                                                                                                                                                                                                                          | 72          |        |           |
      | tag:"sample04061424" \| eval txt="count" \| limit 1 \| table txt \| map " tag:"sample04061424" \| stats $txt$(timestamp) "                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 72          | 1      | 1         |
      | \| makeresults count=1 \| eval app_name="appname" \| map " * \| stats count() by $app_name$"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |             |        | 2         |
      | tag:json_jpath_mv_where \| mvexpand json.a \| table json.a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | 1           | 3      | 1         |
      | tag:json_jpath_mv_where \| mvexpand json.a \| limit 2 \| table json.a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 1           | 2      | 1         |
      | tag:sample040614* \| table appname, hostname, apache.method \| limit 10 \| mvcombine hostname                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 4926,4945   |        |           |
      | tag:"sample04061424" \| table appname, hostname, apache.method \| limit 100 \| mvcombine apache.method                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 72          | 1      | 3         |
      | index=* tag:"sample04061424" \| table appname, hostname, apache.clientip, apache.method \| limit 72 \| mvcombine apache.method                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 72          |        |           |
      | tag:json_jpath0 \| jpath output=x path="a[*][2]" \| stats sum(x)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 1           | 1      | 1         |
      | tag:json_jpath_mv_where \| jpath output=city path="$.a[*].city" \| jpath output=status path="$.a[*].status" \| eval str_status = tostring(status) \| eval x=mvzip(city,str_status)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 1           |        |           |
      | tag:json_jpath_mv_where \| jpath output=city path="a[*].city" \| jpath output=status path="a[*].status" \| eval x=mvszip(city,status) \| mvexpand x \| parse field=x "(?<ccc>\w+),(?<ddd>\d+)"  \| where ccc=="beijing" \| stats count() by ddd                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | 1           | 2      | 2         |
#值正确，一个在7左右，另一个5左右
      | tag:"sample04061424" AND apache.resp_len:*  \| eval r_log_f=log(apache.resp_len) \| eval r_log_int = log(apache.status) \| table r_log_f, r_log_int                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 70          |        |           |
#  bug    | tag:"sample04061424" apache.method:GET \| eval x = parsedate("28/04/2018", "dd/MM/yyyy",'zh') \| table x                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 可能         | 可能       |
#      弹出非法输入
#      | tag:"sample04061424" \|eval a=add(apache.status,3) \| sort a
#      下面这两个需要前提条件 在搜索框中输入：logtype:apache | eval method = apache.method | stats count() as count_1, avg(apache.resp_len) as avg_len by method, apache.status后，构建定时任务: xxtest
#      | index=schedule schedule_name:xxtest AND count_1:*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |            |          |
#      | index=schedule schedule_name:xxtest AND apache.status:>200 \| stats count() by apache.status                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |            |          |
#      youbug | tag:"sample04061424"\| fields apache.method apache.clientip \| join type=left apache.clientip [[ tag:"sample04061424" \| stats sum(apache.status) by apache.clientip ]]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 72         | 72       |
#    |tag:"sample04061424" AND /[0-1][0-8]0{2,2}                                                                                                                                                                                                                                                                                                      |            |          |
#      | index=machine*,yott* starttime="-1000d" endtime = "now" appname:disk OR tag:sample04061424                                                                                                                                      | 10433      |
#      | index=machine*,yott* starttime="-5h" endtime = "now" appname:disk OR tag:sample04061424                                                                                                                                         |            |
#    |index=apache starttime="-5h/h" endtime="now" tag:"sample04061424" | stats avg(apache.status) by apache.clientip | join type=inner apache.clientip [[ index=yotta* appname:second AND tag:"sample04061424" AND apache.clientip:23.166.125.53 | stats sum(apache.status) by apache.clientip ]]|     |                                             |
#      | tag:"sample04061424" AND apache.resp_len:*  \| eval r_log_f=log(apache.resp_len) \| eval r_log_int = log(apache.status) \| table r_log_f, r_log_int | 7,8          | 5,6     |
#tag:"sample04061424" AND apache.status:* | transaction apache.status maxspan=10 语法错误

  @smoke @spl
  Scenario Outline: 根据生成的字段值进行判断
    Given I set the parameter "SearchInput" with value "<splQuery>"
    And I click the "DateEditor" button
    And I click the "Today" button
    And I click the "SearchButton" button
    And I wait element "SearchStatus" change text to "搜索完成!"
    Then I will see the top "<rowNum>" of "<columnName>" is "<value>" when search "<splQuery>"

    Examples:
      | rowNum | splQuery                                                                                                                                                                                                                                                                                                                     | columnName                                      | value                                                                                                                |
      |        | tag:sample04061424_json_sdyd_float_59 \| eval r_len_e=len(json.application) \| eval r_len_c=len(json.name) \| table json.application, json.name, r_len_e, r_len_c                                                                                                                                                            | r_len_e,r_len_c                                 | 17,21                                                                                                                |
      |        | tag:"sample04061424"  AND apache.status:404 \| eval res_case=case(apache.status==200,"status=200",apache.status>=301,"apache>=301",apache.status==304,"apache==304",default,"apache=other") \| table apache.status, res_case                                                                                                 | r_status                                        | apache>=301                                                                                                          |
      |        | tag:sample04061424 AND apache.status:>=301 \| eval r_status=case(apache.status==200,"status=200",apache.status<=301,"apache<=301",apache.status==304,"apache==304",default,"apache=other") \| table r_status                                                                                                                 | r_status                                        | apache=other                                                                                                         |
      |        | tag:"sample04061424" \| eval r_match =match(apache.clientip, "\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}") \| table apache.clientip, r_match                                                                                                                                                                                  | r_match                                         | true                                                                                                                 |
      |        | tag:"sample04061424" AND apache.request_query:* \| eval r_match1 = match(apache.request_query, "b.*e") \| eval r_match2 = match(apache.request_query, "^bcd") \| table apache.request_query, r_match1, r_match2                                                                                                              | r_match2                                        | true                                                                                                                 |
      |        | tag:"sample04061424" \| eval res_to_str=tolong("123") \| eval res_to_long=tolong(20.3) \| table res_to_str, res_to_long                                                                                                                                                                                                      | res_str_tol,res_tol                             | 123,20                                                                                                               |
      |        | tag:"sample04061424" \| eval r_frm_str=todouble("123.1")  \| eval r_frm_long = todouble(20) \| eval res=r_frm_str+20\| eval t_frm_str = typeof(r_frm_str) \| eval t_frm_long = typeof(r_frm_long) \| eval t_res = typeof(res) \| table r_frm_str, t_frm_str, r_frm_long,t_frm_long, res,t_res                                | t_frm_str,t_frm_long,t_res                      | double,double,double                                                                                                 |
      |        | tag:sample04061424_json_sdyd_41 \| eval t_cputime = typeof(json.cpuTime) \| eval t_actionName=typeof(json.actionName) \| eval t_failed=typeof(json.failed) \| eval t_time=typeof(agent_send_timestamp)  \| eval t_dimensions_ip=typeof(json.dimensions.IP) \| table t_cputime, t_actionName,t_failed,t_time,t_dimensions_ip  | t_cputime,t_actionName,t_failed,t_time,t_time   | double,string,object,long,string                                                                                     |
      |        | tag:"sample04061424" \| eval t = "logtype:" + logtype \| where tostring(t) == "logtype:apache" && tostring(apache.clientip) == "23.166.125.53" && tostring(appname) == "apache" \| table apache.clientip, appname, t                                                                                                         | apache.clientip,appname,t                       | 23.166.125.53,apache,logtype:apache                                                                                  |
      |        | tag:"sample04061424" apache.method:GET \| eval x = parsedate("28/04/2016:12:01:01","dd/MM/yyyy:HH:mm:ss") \| eval y = parsedate("28/04/2016","dd/MM/yyyy") \| table x,y                                                                                                                                                      | x,y                                             | 1461816061000,1461772800000                                                                                          |
      |        | tag:"sample04061424" \| eval r_m130 = cidrmatch("192.168.1.130/25", "192.168.1.129") \| eval r_m128 = cidrmatch("192.168.1.128/25", "192.168.1.129") \| eval r_m255 = cidrmatch("192.168.1.255/25", "192.168.1.129") \| table r_m130, r_m128, r_m255                                                                         | r_m130,r_m128,r_m255                            | true,true,true                                                                                                       |
      |        | tag:"sample04061424" \| transaction apache.resp_len \| stats count(apache.resp_len)                                                                                                                                                                                                                                          | count(apache.resp_len)                          | 29                                                                                                                   |
      |        | tag:"sample04061424" \| transaction apache.status, apache.method \| stats count() as cnt                                                                                                                                                                                                                                     | cnt                                             | 6                                                                                                                    |
      |        | tag:"sample04061424" \| where apache.status>400 \| stats dc(apache.status)                                                                                                                                                                                                                                                   | dc(apache.status)                               | 4                                                                                                                    |
      |        | tag:"sample04061424" \| top 50 apache.resp_len                                                                                                                                                                                                                                                                               | apache.resp_len,count,percent                   |                                                                                                                      |
      |        | starttime="-3d/d" endtime="now" tag:"sample04061424" \| top 50 apache.resp_len                                                                                                                                                                                                                                               | apache.resp_len,count,percent                   |                                                                                                                      |
      | 1      | tag:"sample04061424" \| stats count() as cnt, max(apache.status) as r_max by apache.clientip \| stats avg(cnt) by r_max                                                                                                                                                                                                      | r_max,avg(cnt)                                  | 200,2.8461538461538463                                                                                               |
      | 2      | tag:"sample04061424" \| top 11 apache.clientip countfield=clientip_count  percentfield=clientip_percent                                                                                                                                                                                                                      | apache.clientip,clientip_count,clientip_percent | 23.166.125.53,13,18.055555555555557,71.221.121.107,11,15.277777777777779                                             |
      | x      | tag:"sample04061424" \| bucket timestamp span=1h as ts \| stats count(apache.clientip) as c_ip by ts                                                                                                                                                                                                                         | c_ip                                            | 72                                                                                                                   |
      | x      | tag:"sample04061424" \| bucket timestamp span=10m as ts\|stats count(appname) as count_app by ts\|eval time=formatdate(ts)\| autoregress count_app p=6\|eval rate=if(empty(count_app_p6),0,abs(count_app_p6-count_app)) \| eval result=if(empty(count_app_p6),0,1) \|where result>0\|fields count_app,time,count_app_p6,rate | count_app_p6,rate                               | 72,72                                                                                                                |
      | x      | tag:"sample04061424" \| bucket timestamp span=3h as ts\| stats count(appname) as count_ by ts\| movingavg count_,5 as ma\| rollingstd count_,5 as rs\| eval lower=ma-1*rs\| eval upper=ma+1*rs\| eval outlier=if(count_>upper\|\|count_<lower, count_, 0)                                                                    | ma,rs,lower,upper                               | 14.4,28.800000000000004,-14.400000000000004,43.2                                                                     |
      |        | tag:"sample04061424" \| where  apache.status > 200 && apache.status < 400 \| table apache.status                                                                                                                                                                                                                             | apache.status                                   | 206                                                                                                                  |
      |        | tag:"sample04061424" \| transaction apache.status  \| stats  min(apache.status)                                                                                                                                                                                                                                              | min(apache.status)                              | 200                                                                                                                  |
      | x      | starttime="-5h/h" endtime="now" tag:"sample04061424"\| bucket timestamp span=10m as ts\|stats count(appname) as count_app by ts \| eval time=formatdate(ts)\| eval time_dis=formatdate(now()-ts, "HH:mm:ss")\|where ts>now()-18000000                                                                                        | count_app                                       | 72                                                                                                                   |
      |        | tag:"sample04061424" \| stats max(apache.status) as value                                                                                                                                                                                                                                                                    | value                                           | 502                                                                                                                  |
      |        | tag:sample04061424 \| eval trade_time=todouble(apache.resp_len) \| where trade_time>0.0 \| stats count() as count_                                                                                                                                                                                                           | count_                                          | 69                                                                                                                   |
      |        | tag:sample04061424 AND apache.resp_len:>0 \| eval trade_time=todouble(apache.resp_len) \| where trade_time>0.1 \| stats count() as count_                                                                                                                                                                                    | count_                                          | 69                                                                                                                   |
      |        | tag:"sample04061424" \| stats count() as cnt, max(apache.status) as r_max_status by apache.clientip \| top 3 r_max_status                                                                                                                                                                                                    | r_max_status,count,percent                      | 200,13,48.148148148148145,404,5,18.51851851851852,500,5,18.51851851851852                                            |
      |        | tag:"sample04061424" \| stats count() as cnt, max(apache.status) as r_max by apache.clientip \| stats max(cnt),max(r_max)                                                                                                                                                                                                    | max(cnt),max(r_max)                             | 13,502                                                                                                               |
      | x      | starttime="-5h/h" endtime="now" tag:"sample04061424" \| bucket timestamp span=10m as ts \| stats count(appname) as count_app by ts \| eval time=formatdate(ts) \| autoregress count_app p=6                                                                                                                                  | count_app                                       | 72                                                                                                                   |
      |        | tag:"sample04061424" \| stats count() by hostname \| lookup user,department /data/rizhiyi/share/host_user.csv on hostname = host                                                                                                                                                                                             | host,user,department                            | 192.168.1.26,syd_test,ete                                                                                            |
      | 2      | tag:"sample04061424"\| stats count(apache.clientip) by apache.clientip, apache.method \| limit 2 \| fields apache.clientip apache.method                                                                                                                                                                                     | apache.clientip,apache.method                   | 23.166.125.53,GET,71.221.121.107,GET                                                                                 |
      |        | starttime="-5h/h" endtime="now" tag:"sample04061424" \| stats count() as count_res by appname,apache.clientip \| fields apache.clientip, count_res                                                                                                                                                                           | apache.clientip,count_res                       |                                                                                                                      |
      |        | tag:"sample04061424" \| stats count() as cnt, max(apache.status) as r_max by apache.clientip \| top 3 cnt                                                                                                                                                                                                                    | cnt,count,percent                               | 1,16,59.25925925925926,2,4,14.814814814814815,4,3,11.11111111111111                                                  |
      |        | tag:sample04061424 \| eval len=if(empty(apache.resp_len),0,1) \| stats top(len,10)                                                                                                                                                                                                                                           | top(len)                                        | 1,70,0,2                                                                                                             |
      |        | tag:"sample04061424" \| stats dc(apache.request_query)                                                                                                                                                                                                                                                                       | dc(apache.request_query)                        | 46                                                                                                                   |
      |        | tag:"sample04061424" \| stats count()                                                                                                                                                                                                                                                                                        | count()                                         | 72                                                                                                                   |
      |        | tag:"sample04061424" \| eval m_ips=split(apache.clientip, ".") \| eval m_paths=split(apache.request_path, "/") \| eval m_ips_count = mvcount(m_ips) \| eval m_paths_count = mvcount(m_paths)  \| table m_ips, m_paths,m_ips_count, m_paths_count                                                                             | m_ips_count,m_paths_count                       | 4,4                                                                                                                  |
      |        | tag:"sample04061424" AND apache.referer_domain:m5.baidu.com  \| eval m_referers=split(apache.referer, "%") \| eval m_referers_find=mvfind(m_referers, "E4") \| table m_referers, m_referers_find                                                                                                                             | m_referers_find                                 | 4                                                                                                                    |
      |        | tag:"sample04061424" AND apache.referer_domain:m5.baidu.com  \| eval m_referers=split(apache.referer, "%") \| eval m_referers_find=mvfind(m_referers, "http://m5.baidu.com/s?from=124n&word=") \| table m_referers, m_referers_find                                                                                          | m_referers_find                                 | 0                                                                                                                    |
      |        | tag:"sample04061424" AND apache.referer_domain:m5.baidu.com  \| eval m_referers=split(apache.referer, "%") \| eval m_referers_find=mvfind(m_referers, "http://m5.baidu.com/s?from=124n&word=ii") \| table m_referers, m_referers_find                                                                                        | m_referers_find                                 | -1                                                                                                                   |
      |        | index=* tag:"sample04061424" \| table hostname, apache.status \| limit 1 \| map "tag:"sample04061424" hostname:$hostname$ apache.status:>$apache.status$ *" \| fields apache.resp_len, apache.status, timestamp                                                                                                              | apache.status                                   | >200                                                                                                                 |
      |        | tag:"sample04061424"  \| table hostname, apache.status \| limit 1  \| map "tag:"sample04061424" hostname:$hostname$ apache.status:>$apache.status$ \| stats count()"                                                                                                                                                         | count()                                         | 23                                                                                                                   |
      |        | tag:"sample04061424" \| table apache.status, apache.method \| limit 1 \| rename apache.status as status \| map "apache.status:$status$ apache.method:$apache.method$ tag:sample04061424 \| stats count() "                                                                                                                   | count()                                         | 49                                                                                                                   |
      |        | tag:"sample04061424" \| table apache.status, apache.method \| limit 1 \| rename apache.status as status\| eval opt_name="stats" \| map "apache.status:$status$ apache.method:$apache.method$ tag:sample04061424 \| $opt_name$ count() "                                                                                      | count()                                         | 49                                                                                                                   |
      |        | tag:"sample04061424" \| eval txt="count" \| limit 1 \| table txt \| map " tag:"sample04061424" \| stats $txt$(timestamp) "                                                                                                                                                                                                   | count(timestamp)                                | 72                                                                                                                   |
      |        | tag:sample040614* \| table appname, hostname, apache.method \| limit 10 \| mvcombine hostname                                                                                                                                                                                                                                | hostname                                        | 192.168.1.26 192.168.1.26 192.168.1.26 192.168.1.26 192.168.1.26 192.168.1.26,192.168.1.26 192.168.1.26 192.168.1.26 |
      |        | tag:sample040614* \| table appname, hostname, apache.method \| limit 10 \| mvcombine hostname                                                                                                                                                                                                                                | appname                                         | json,xiaomi                                                                                                          |
      |        | tag:json_jpath0 \| jpath output=x path="a[*][2]" \| stats sum(x)                                                                                                                                                                                                                                                             | sum(x)                                          | 3                                                                                                                    |
      |        | tag:json_jpath_mv_where \| jpath output=city path="a[*].city" \| jpath output=status path="a[*].status" \| eval x=mvszip(city,status) \| mvexpand x \| parse field=x "(?<ccc>\w+),(?<ddd>\d+)"  \| where ccc=="beijing" \| stats count() by ddd                                                                              | ddd,count()                                     | 403,1,200,1                                                                                                          |

  @smoke @spl
  Scenario Outline: 根据生成的日志条数进行判断
    Given I set the parameter "SearchInput" with value "<splQuery>"
    And I click the "DateEditor" button
    And I click the "Today" button
    And I click the "SearchButton" button
    And I wait element "SearchStatus" change text to "搜索完成!"
    Then I will see the number of log is "<num>" when search "<splQuery>"

    Examples:
      | splQuery                                                                                                                         | num |
      | tag:"sample04061424" AND logtype:apache AND (NOT apache.request_query:*) \|dedup appname,apache.request_query  keepempty = true  | 17  |
      | tag:"sample04061424" AND logtype:apache AND (NOT apache.request_query:*) \| dedup appname,apache.request_query keepempty = false | 17  |
      | tag:"sample04061424" \| transaction apache.resp_len \| where _count==4                                                           | 2   |
      | tag:"sample04061424" \| transaction apache.resp_len \| where _duration==1                                                        | 4   |
      | tag:"sample04061424" \| transaction apache.clientip endswith=eval(apache.status == 200) maxevents=10 contains="Dalvik"           | 4   |
      | tag:"sample04061424" AND logtype:apache AND (NOT apache.request_query:*) \|dedup appname,apache.request_query  keepempty = true  | 17  |
      | tag:"sample04061424" AND logtype:apache AND (NOT apache.request_query:*) \| dedup appname,apache.request_query keepempty = false | 17  |
      | tag:"sample04061424" \| dedup 3 apache.status,appname keepevents = false \|sort by timestamp                                     | 14  |
      | tag:"sample04061424"\| limit 10                                                                                                  | 10  |
      | tag:"sample04061424" \| transaction apache.resp_len \| sort by apache.resp_len                                                   | 29  |

  @smoke @spl
  Scenario Outline: 判断是否排序
    Given I set the parameter "SearchInput" with value "<splQuery>"
    And I click the "DateEditor" button
    And I click the "Today" button
    And I click the "SearchButton" button
    And I wait element "SearchStatus" change text to "搜索完成!"
    Then I will see the result order by "<columnName>" when search "<splQuery>"

    Examples:
      | splQuery                                                                                                                                                                                                                                                                                                             | columnName                            |
      | tag:"sample04061424" \| sort by +apache.status,+apache.resp_len\| table apache.status, apache.resp_len                                                                                                                                                                                                               | +apache.status,+apache.resp_len       |
      | tag:"sample04061424" \| stats count() as cnt, max(apache.status) as r_max by apache.clientip \| top 3 cnt                                                                                                                                                                                                            | +cnt                                  |
      | tag:"sample04061424" \| stats avg(apache.resp_len) as avg_length, count(apache.clientip) as ip_count by apache.status \| sort by ip_count                                                                                                                                                                            | -ip                                   |
      | tag:"sample04061424" \| eval f_agent_send = formatdate(agent_send_timestamp) \| eval f_collector_recv = formatdate(collector_recv_timestamp) \| eval f_timestamp = formatdate(timestamp) \| table agent_send_timestamp, f_agent_send, collector_recv_timestamp, f_collector_recv, timestamp,f_timestamp, raw_message | -agent_send_timestamp,raw_message(+1) |
      | index=* starttime="-50h" endtime="now" * \| top 10 appname \| limit 10 \|sort by count                                                                                                                                                                                                                               | +count                                |
      | index=* starttime="-50h" endtime="now" * \| stats count() as ct by appname \| limit 10 \| sort by +ct                                                                                                                                                                                                                | +ct                                   |
